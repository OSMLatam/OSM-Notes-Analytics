{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://osmlatam.org/schemas/metadata.schema.json",
  "title": "OSM Notes Analytics Metadata",
  "description": "Metadata for OSM Notes Analytics JSON export",
  "type": "object",
  "required": [
    "export_date",
    "total_users",
    "total_countries",
    "version",
    "schema_version",
    "export_timestamp"
  ],
  "properties": {
    "export_date": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time when the export was generated"
    },
    "export_timestamp": {
      "type": "number",
      "description": "Unix timestamp when the export was generated"
    },
    "total_users": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of users exported"
    },
    "total_countries": {
      "type": "integer",
      "minimum": 0,
      "description": "Total number of countries exported"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version (MAJOR.MINOR.PATCH) of the export format. MAJOR changes require viewer updates."
    },
    "schema_version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Version of the JSON schema used for validation"
    },
    "api_compat_min": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Minimum required viewer API version for compatibility"
    },
    "data_schema_hash": {
      "type": "string",
      "description": "SHA256 hash of the datamart schema structure for change detection"
    }
  },
  "additionalProperties": false
}

